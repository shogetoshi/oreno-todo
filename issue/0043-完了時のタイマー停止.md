# Issue #0043: 完了ボタン押下時にタイマーを自動停止

## 概要

Todoの完了ボタンを押した際に、計測中のタイマーが動いていれば自動的に停止する。

## 現状の問題

- 完了ボタンを押してもタイマーが停止しない
- タスクを完了したのに計測が続いている状態になる可能性がある
- 「完了 = 作業終了」という意図に反する

## 仕様

- Todoに対して完了操作（`toggleCompleted()`で完了状態にする）を実行した場合：
  1. タイマーが計測中であれば停止する（`stopTimer()`相当の処理）
  2. 完了状態にする（`completedAt`を現在時刻に設定）

- 完了状態を解除する場合（完了→未完了）はタイマーに影響しない

## 関連Issue

- Issue #0009: 完了済みTodoに対する計測開始時の挙動改善（逆のケース）
- Issue #0010: 実行中にするtodoは常に一つ

## 受け入れ条件

- [ ] 計測中のTodoを完了にすると、タイマーが停止する
- [ ] 計測中のTodoを完了にすると、`timeRanges`の最後のレコードに`end`が設定される
- [ ] 計測していないTodoを完了にしても正常に動作する
- [ ] 完了済みTodoを未完了に戻してもタイマーは開始しない
- [ ] 単体テストが追加されている
